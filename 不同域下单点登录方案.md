# 不同域下单点登录(方案1)
## 业务系统概述
a.com和b.com为业务系统,sso为登录系统. 均为前后端分离
```
a.com   //业务a
b.com   //业务b
sso.com //登录
```
## a系统未登录
```
a系统
  a前台(ajax) -> a后台系统验证cookie
  a后台验证cookie失效或不存在 -> 返回特殊状态码401及Url: sso.com/getLogin? (验证该用户在sso是否登录)
  a前台拼接returnUrl="currentUrl"参数到url; 
  a前台 window.loacation.href = url
  (是否传serviceTicket)
sso系统
  sso后台接收到请求 sso.com/getLogin?判断该用户是否在sso注册登录
  1) sso后台判断为未登录 -> 302到sso.com?returnUrl="returnUrl"前台页面重新登录
       sso前台(ajax) -> sso后台登录成功 -> 返回url: a.com/getLogin?serviceTicket=""&returnUrl=""; sso域种cookie
       sso前台判断(ajax)返回有url: window.location.href = url ; 若没有则进入登录系统
  2) sso后台判断为已登录 -> 302到 a.com/getLogin?serviceTicket="serviceTicket"&returnUrl="currentUrl"; sso域种cookie
  
a系统
  a后台接收请求 a.com/getLogin?serviceTicket=""&returnUrl=""; a域种cookie并302到returnUrl
```

## b系统未登录

## 退出a系统

## 退出sso
